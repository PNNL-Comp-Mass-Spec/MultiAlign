<Window x:Class="MultiAlignRogue.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:multiAlignRogue="clr-namespace:MultiAlignRogue"
        Title="MultiAlign Rogue" Height="508.075" Width="976">
    <Window.DataContext>
        <multiAlignRogue:MainViewModel/>
    </Window.DataContext>
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
    </Window.Resources>
    <Grid Name ="MainGrid">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="500"/>
            <ColumnDefinition/>
        </Grid.ColumnDefinitions>
        <Menu Grid.ColumnSpan="2" HorizontalAlignment="Left" Height="20" VerticalAlignment="Top" Width="{Binding ElementName=MainGrid,Path=ActualWidth}">
            <MenuItem Header="File">
                <MenuItem Header="Select Files" HorizontalAlignment="Left" Width="168" Margin="0,0,-8,0" Command="{Binding SelectFilesCommand}"/>
                <MenuItem Header="Search DMS" Command="{Binding SearchDmsCommand}" Visibility="{Binding ShowOpenFromDms, Converter={StaticResource BoolToVis}}" />
                <MenuItem Header="Load Project" HorizontalAlignment="Left" Width="168"/>
                <MenuItem Header="Save Project" HorizontalAlignment="Left" Width="168"/>
            </MenuItem>
        </Menu>
        <ProgressBar HorizontalAlignment="Right" Margin="0,0,10,19" Width="90" Height="20" VerticalAlignment="Bottom" Value="{Binding ProgressTracker, Mode = OneWay}"/>
        <DataGrid Name="FileSelectionDataGrid" Grid.Column="0" HorizontalAlignment="Left" Margin="10,53,0,46" 
                  Width="480" AutoGenerateColumns="False" CanUserReorderColumns="False" CanUserAddRows="False" 
                  ItemsSource="{Binding m_analysis.MetaData.Datasets, UpdateSourceTrigger=PropertyChanged}" SelectionChanged="DataGrid_SelectionChanged">
            <DataGrid.Columns>
                <DataGridTextColumn Header="File Name" Width="300" Binding="{Binding DatasetName}"/>
                <DataGridCheckBoxColumn Header="Scans" IsReadOnly="True" Binding="{Binding ScansBool}"/>
                <DataGridCheckBoxColumn Header="Raw" IsReadOnly="True" Binding="{Binding RawBool}"/>
                <DataGridCheckBoxColumn Header="Features" Width="55" IsReadOnly="True" Binding="{Binding FeaturesFound, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                <DataGridCheckBoxColumn Header="Aligned" IsReadOnly="True" Binding="{Binding IsAligned}"/>
            </DataGrid.Columns>
        </DataGrid>
        <TabControl Grid.Column="1" Margin="10,25,10,10">
            <TabItem Header="Feature Finding">
                <Grid Margin="0,19,39,8" HorizontalAlignment="Right" Width="384">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="183*"/>
                        <ColumnDefinition Width="84*"/>
                        <ColumnDefinition Width="25*"/>
                        <ColumnDefinition Width="96*"/>
                    </Grid.ColumnDefinitions>
                    <Label Content="Precursor Mass Resolution" VerticalContentAlignment="Top"  HorizontalAlignment="Left" Height="28" Margin="20,7,0,0" VerticalAlignment="Top" Width="168" Grid.ColumnSpan="2"/>
                    <TextBox Grid.Column="1" HorizontalContentAlignment="Center" Height="19" Margin="0,10,14,0" TextWrapping="Wrap" VerticalAlignment="Top" 
                             Text="{Binding MassResolution, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Right" Width="60"/>
                    <Label Content="Fragmentation Window Size" VerticalContentAlignment="Top"  HorizontalAlignment="Left" Height="28" Margin="20,31,0,0" VerticalAlignment="Top" Width="168" Grid.ColumnSpan="2"/>
                    <TextBox Grid.Column="1" HorizontalContentAlignment="Center" Height="19" Margin="0,34,14,0" TextWrapping="Wrap" VerticalAlignment="Top" 
                             Text="{Binding FragmentationTolerance, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Right" Width="60"/>
                    <CheckBox Content="Only analyze m/z from" VerticalContentAlignment="Top"  HorizontalAlignment="Left" Height="28" Margin="8,59,0,0" VerticalAlignment="Top" Width="168" 
                              IsChecked="{Binding ShouldUseMzFilter, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBox Grid.Column="1" HorizontalContentAlignment="Center" Height="19" Margin="0,58,14,0" TextWrapping="Wrap" VerticalAlignment="Top" 
                             Text="{Binding MinimumMz, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Right" Width="60"/>
                    <TextBox Grid.Column="3" HorizontalContentAlignment="Center" Height="19" Margin="10,58,0,0" TextWrapping="Wrap" VerticalAlignment="Top" 
                             Text="{Binding MaximumMz, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" Width="60"/>
                    <Label Content="to" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,54,0,0" Grid.Column="2" Height="26" Width="30" Grid.ColumnSpan="2"/>
                    <CheckBox Content="Only consider charge states" VerticalContentAlignment="Top"  HorizontalAlignment="Left" Height="28" Margin="8,84,0,0" VerticalAlignment="Top" Width="168" 
                              IsChecked="{Binding ShouldUseChargeStateFilter, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBox Grid.Column="1" HorizontalContentAlignment="Center" Height="19" Margin="0,84,14,0" TextWrapping="Wrap" VerticalAlignment="Top"
                             Text="{Binding MinimumCharge, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Right" Width="60"/>
                    <TextBox Grid.Column="3" HorizontalContentAlignment="Center" Height="19" Margin="10,84,0,0" TextWrapping="Wrap" VerticalAlignment="Top" 
                             Text="{Binding MaximumCharge, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Left" Width="60"/>
                    <Label Content="to" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="0,80,0,0" Grid.Column="2" Height="26" Width="30" Grid.ColumnSpan="2"/>
                    <CheckBox Content="Minimum Deisotoping Fit" VerticalContentAlignment="Top"  HorizontalAlignment="Left" Height="28" Margin="8,108,0,0" VerticalAlignment="Top" Width="168"
                              IsChecked="{Binding ShouldUseDeisotopingFilter, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBox Grid.Column="1" HorizontalContentAlignment="Center" Height="19" Margin="0,108,14,0" TextWrapping="Wrap" VerticalAlignment="Top" 
                             Text="{Binding MinimumDeisotopingScore, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Right" Width="60"/>
                    <CheckBox Content="Minimum Intensity" VerticalContentAlignment="Top"  HorizontalAlignment="Left" Height="28" Margin="8,132,0,0" VerticalAlignment="Top" Width="168"
                              IsChecked="{Binding ShouldUseIntensityFilter, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}"/>
                    <TextBox Grid.Column="1" HorizontalContentAlignment="Center" Height="19" Margin="0,132,14,0" TextWrapping="Wrap" VerticalAlignment="Top" 
                             Text="{Binding MinimumIntensity, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Right" Width="60"/>
                    
                    <Button Content="Load MS Features" HorizontalAlignment="Left" Height="24" Margin="0,303,0,0" VerticalAlignment="Top" Width="114" Command="{Binding FindMSFeaturesCommand}"/>
                    <Button Content="Plot MS Features" HorizontalAlignment="Left" Height="24" Margin="0,332,0,0" VerticalAlignment="Top" Width="114" Command="{Binding PlotMSFeaturesCommand}"/>
                </Grid>
            </TabItem>
            <TabItem Header="Dataset Alignment" HorizontalAlignment="Left" Width="113" Margin="-2,0,-14,0">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="22*"/>
                        <ColumnDefinition Width="51*"/>
                    </Grid.ColumnDefinitions>
                    <Label Content="Baseline" HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="39,0,0,387" Width="79" Height="24" Grid.Column="1"/>
                    <ComboBox HorizontalAlignment="Left" VerticalAlignment="Bottom" Width="424" Margin="4,0,0,365" Grid.ColumnSpan="2" DisplayMemberPath="DatasetName" 
                              ItemsSource="{Binding m_analysis.MetaData.Datasets}"
                              SelectedItem="{Binding SelectedBaseline, Mode=TwoWay}"/>
                    <Label Content="Tolerances" HorizontalAlignment="Left" Height="24" Margin="10,51,0,0" VerticalAlignment="Top" Width="77" FontWeight="Bold"/>

                    <Label Content="Mass Tolerance" VerticalContentAlignment="Top"  HorizontalAlignment="Left" Height="28" Margin="11,73,0,0" VerticalAlignment="Top" Width="168" Grid.ColumnSpan="2"/>
                    <TextBox HorizontalContentAlignment="Center" Height="19" Margin="0,76,261,0" TextWrapping="Wrap" VerticalAlignment="Top" 
                             Text="{Binding MassTolerance, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Right" Width="60" Grid.ColumnSpan="2"/>
                    <Label Content="NET Tolerance" VerticalContentAlignment="Top"  HorizontalAlignment="Left" Height="28" Margin="11,93,0,0" VerticalAlignment="Top" Width="168" Grid.ColumnSpan="2"/>
                    <TextBox HorizontalContentAlignment="Center" Height="19" Margin="0,97,261,0" TextWrapping="Wrap" VerticalAlignment="Top" 
                             Text="{Binding NetTolerance, Mode=TwoWay, NotifyOnSourceUpdated=True, UpdateSourceTrigger=PropertyChanged}" HorizontalAlignment="Right" Width="60" Grid.ColumnSpan="2"/>
                    <Label Content="Alignment Algorithm" HorizontalContentAlignment="Left" Height="28" VerticalAlignment="Top" Margin="151,51,0,0" Width="150" HorizontalAlignment="Left" FontWeight="Bold" Grid.Column="1"/>
                    <ComboBox HorizontalAlignment="Left" VerticalAlignment="Bottom" Width="150" Margin="142,0,0,309" Grid.Column="1" SelectedItem="{Binding SelectedAlignmentAlgorithm}"
                              ItemsSource="{Binding m_AnalysisOptions.AlignmentAlgorithms, UpdateSourceTrigger=PropertyChanged}"/>
                    <Label Content="Clustering Method" HorizontalContentAlignment="Left" Height="28" VerticalAlignment="Top" Margin="150,104,0,0" Width="150" HorizontalAlignment="Left" FontWeight="Bold" Grid.Column="1"/>
                    <ComboBox HorizontalAlignment="Left" VerticalAlignment="Bottom" Width="150" Margin="142,0,0,256" Grid.Column="1" SelectedItem="{Binding SelectedLcmsFeatureClusteringAlgorithm}"
                              ItemsSource="{Binding m_AnalysisOptions.ClusteringAlgorithms}"/>
                    <Label Content="Calibration Method" HorizontalContentAlignment="Left" Height="28" VerticalAlignment="Top" Margin="150,152,0,0" Width="150" HorizontalAlignment="Left" FontWeight="Bold" Grid.Column="1"/>
                    <ComboBox HorizontalAlignment="Left" VerticalAlignment="Bottom" Width="150" Margin="142,0,0,208" Grid.Column="1" SelectedItem="{Binding SelectedCalibrationType}"
                              ItemsSource="{Binding CalibrationOptions}"/>
                    <Button Content="Align to Baseline" HorizontalAlignment="Left" Height="24" Margin="12,377,0,0" VerticalAlignment="Top" Width="110" Command="{Binding AlignToBaselineCommand}"/>
                    <Button Content="Cluster List" Grid.Column="1" HorizontalAlignment="Left" Height="24" Margin="184,377,0,0" VerticalAlignment="Top" Width="108" Command="{Binding ClusterListCommand}"/>

                </Grid>
            </TabItem>
            <TabItem Header="AMT Alignment" HorizontalAlignment="Left" VerticalAlignment="Top" Width="107" Margin="-2,0,0,0">
                <Grid/>
            </TabItem>
            <TabItem Header="LC-MS Clustering" Margin="-2,-2,-3,-1">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="168*"/>
                        <ColumnDefinition Width="335*"/>
                    </Grid.ColumnDefinitions>
                </Grid>
            </TabItem>
        </TabControl>
        <Label Content="Working Data Files" HorizontalContentAlignment="Left" Height="28" Margin="10,25,0,0" VerticalAlignment="Top" Width="211" HorizontalAlignment="Left" FontSize="14"/>
        <TextBox HorizontalAlignment="Left" Margin="10,0,0,19" Text="{Binding inputFilePath}" IsReadOnly="True" TextWrapping="Wrap" Width="329" Height="22" VerticalAlignment="Bottom" />
        <Button Content="Add" HorizontalAlignment="Left" Margin="344,0,0,19" Width="50" Height="22" VerticalAlignment="Bottom" Command="{Binding AddFolderCommand}"/>

    </Grid>
</Window>
